<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.lims.mapper.SampleProgramsMapper">
    
    <resultMap type="SamplePrograms" id="SampleProgramsResult">
        <result property="sampleProgramsId"    column="sample_programs_id"    />
        <result property="originalId"    column="original_id"    />
        <result property="spCode"    column="sp_code"    />
        <result property="spCodeAlt"    column="sp_code_alt"    />
        <result property="testRules"    column="test_rules"    />
        <result property="criterionId"    column="criterion_id"    />
        <result property="version"    column="version"    />
        <result property="domainId"    column="domain_id"    />
        <result property="domainName"    column="domain_name"    />
        <result property="sampleType"    column="sample_type"    />
        <result property="fullType"    column="full_type"    />
        <result property="detailName"    column="detail_name"    />
        <result property="status"    column="status"    />
        <result property="freezeFlag"    column="freeze_flag"    />
        <result property="isCal"    column="is_cal"    />
        <result property="dispStatus"    column="disp_status"    />
        <result property="freezeBy"    column="freeze_by"    />
        <result property="freezerDesc"    column="freezer_desc"    />
        <result property="freezeTime"    column="freeze_time"    />
        <result property="recorderDesc"    column="recorder_desc"    />
        <result property="createrDesc"    column="creater_desc"    />
        <result property="createrCode"    column="creater_code"    />
        <result property="createrDate"    column="creater_date"    />
        <result property="startTime"    column="start_time"    />
        <result property="sorter"    column="sorter"    />
        <result property="createBy"    column="create_by"    />
        <result property="createTime"    column="create_time"    />
        <result property="updateBy"    column="update_by"    />
        <result property="updateTime"    column="update_time"    />
        <result property="remark"    column="remark"    />
        <result property="delFlag"    column="del_flag"    />
    </resultMap>

    <sql id="selectSampleProgramsVo">
        select sample_programs_id, original_id, sp_code, sp_code_alt, test_rules, criterion_id, version, domain_id, domain_name, sample_type, full_type, detail_name, status, freeze_flag, is_cal, disp_status, freeze_by, freezer_desc, freeze_time, recorder_desc, creater_desc, creater_code, creater_date, start_time, sorter, create_by, create_time, update_by, update_time, remark, del_flag from lims_sample_programs
    </sql>

    <select id="selectSampleProgramsList" parameterType="SamplePrograms" resultMap="SampleProgramsResult">
        <include refid="selectSampleProgramsVo"/>
        <where>  
            <if test="originalId != null  and originalId != ''"> and original_id = #{originalId}</if>
            <if test="spCode != null  and spCode != ''"> and sp_code = #{spCode}</if>
            <if test="spCodeAlt != null  and spCodeAlt != ''"> and sp_code_alt = #{spCodeAlt}</if>
            <if test="testRules != null  and testRules != ''"> and test_rules = #{testRules}</if>
            <if test="criterionId != null  and criterionId != ''"> and criterion_id = #{criterionId}</if>
            <if test="version != null  and version != ''"> and version = #{version}</if>
            <if test="domainId != null  and domainId != ''"> and domain_id = #{domainId}</if>
            <if test="domainName != null  and domainName != ''"> and domain_name like concat('%', #{domainName}, '%')</if>
            <if test="sampleType != null  and sampleType != ''"> and sample_type = #{sampleType}</if>
            <if test="fullType != null  and fullType != ''"> and full_type = #{fullType}</if>
            <if test="detailName != null  and detailName != ''"> and detail_name like concat('%', #{detailName}, '%')</if>
            <if test="status != null  and status != ''"> and status = #{status}</if>
            <if test="freezeFlag != null  and freezeFlag != ''"> and freeze_flag = #{freezeFlag}</if>
            <if test="isCal != null  and isCal != ''"> and is_cal = #{isCal}</if>
            <if test="dispStatus != null  and dispStatus != ''"> and disp_status = #{dispStatus}</if>
            <if test="freezeBy != null  and freezeBy != ''"> and freeze_by = #{freezeBy}</if>
            <if test="freezerDesc != null  and freezerDesc != ''"> and freezer_desc = #{freezerDesc}</if>
            <if test="freezeTime != null "> and freeze_time = #{freezeTime}</if>
            <if test="recorderDesc != null  and recorderDesc != ''"> and recorder_desc = #{recorderDesc}</if>
            <if test="createrDesc != null  and createrDesc != ''"> and creater_desc = #{createrDesc}</if>
            <if test="createrCode != null  and createrCode != ''"> and creater_code = #{createrCode}</if>
            <if test="createrDate != null "> and creater_date = #{createrDate}</if>
            <if test="startTime != null "> and start_time = #{startTime}</if>
            <if test="sorter != null "> and sorter = #{sorter}</if>
        </where>
    </select>
    
    <select id="selectSampleProgramsBySampleProgramsId" parameterType="Long" resultMap="SampleProgramsResult">
        <include refid="selectSampleProgramsVo"/>
        where sample_programs_id = #{sampleProgramsId}
    </select>

    <insert id="insertSamplePrograms" parameterType="SamplePrograms" useGeneratedKeys="true" keyProperty="sampleProgramsId">
        insert into lims_sample_programs
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="originalId != null">original_id,</if>
            <if test="spCode != null and spCode != ''">sp_code,</if>
            <if test="spCodeAlt != null">sp_code_alt,</if>
            <if test="testRules != null">test_rules,</if>
            <if test="criterionId != null">criterion_id,</if>
            <if test="version != null">version,</if>
            <if test="domainId != null">domain_id,</if>
            <if test="domainName != null">domain_name,</if>
            <if test="sampleType != null">sample_type,</if>
            <if test="fullType != null">full_type,</if>
            <if test="detailName != null">detail_name,</if>
            <if test="status != null">status,</if>
            <if test="freezeFlag != null">freeze_flag,</if>
            <if test="isCal != null">is_cal,</if>
            <if test="dispStatus != null">disp_status,</if>
            <if test="freezeBy != null">freeze_by,</if>
            <if test="freezerDesc != null">freezer_desc,</if>
            <if test="freezeTime != null">freeze_time,</if>
            <if test="recorderDesc != null">recorder_desc,</if>
            <if test="createrDesc != null">creater_desc,</if>
            <if test="createrCode != null">creater_code,</if>
            <if test="createrDate != null">creater_date,</if>
            <if test="startTime != null">start_time,</if>
            <if test="sorter != null">sorter,</if>
            <if test="createBy != null">create_by,</if>
            <if test="createTime != null">create_time,</if>
            <if test="updateBy != null">update_by,</if>
            <if test="updateTime != null">update_time,</if>
            <if test="remark != null">remark,</if>
            <if test="delFlag != null">del_flag,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="originalId != null">#{originalId},</if>
            <if test="spCode != null and spCode != ''">#{spCode},</if>
            <if test="spCodeAlt != null">#{spCodeAlt},</if>
            <if test="testRules != null">#{testRules},</if>
            <if test="criterionId != null">#{criterionId},</if>
            <if test="version != null">#{version},</if>
            <if test="domainId != null">#{domainId},</if>
            <if test="domainName != null">#{domainName},</if>
            <if test="sampleType != null">#{sampleType},</if>
            <if test="fullType != null">#{fullType},</if>
            <if test="detailName != null">#{detailName},</if>
            <if test="status != null">#{status},</if>
            <if test="freezeFlag != null">#{freezeFlag},</if>
            <if test="isCal != null">#{isCal},</if>
            <if test="dispStatus != null">#{dispStatus},</if>
            <if test="freezeBy != null">#{freezeBy},</if>
            <if test="freezerDesc != null">#{freezerDesc},</if>
            <if test="freezeTime != null">#{freezeTime},</if>
            <if test="recorderDesc != null">#{recorderDesc},</if>
            <if test="createrDesc != null">#{createrDesc},</if>
            <if test="createrCode != null">#{createrCode},</if>
            <if test="createrDate != null">#{createrDate},</if>
            <if test="startTime != null">#{startTime},</if>
            <if test="sorter != null">#{sorter},</if>
            <if test="createBy != null">#{createBy},</if>
            <if test="createTime != null">#{createTime},</if>
            <if test="updateBy != null">#{updateBy},</if>
            <if test="updateTime != null">#{updateTime},</if>
            <if test="remark != null">#{remark},</if>
            <if test="delFlag != null">#{delFlag},</if>
         </trim>
    </insert>

    <update id="updateSamplePrograms" parameterType="SamplePrograms">
        update lims_sample_programs
        <trim prefix="SET" suffixOverrides=",">
            <if test="originalId != null">original_id = #{originalId},</if>
            <if test="spCode != null and spCode != ''">sp_code = #{spCode},</if>
            <if test="spCodeAlt != null">sp_code_alt = #{spCodeAlt},</if>
            <if test="testRules != null">test_rules = #{testRules},</if>
            <if test="criterionId != null">criterion_id = #{criterionId},</if>
            <if test="version != null">version = #{version},</if>
            <if test="domainId != null">domain_id = #{domainId},</if>
            <if test="domainName != null">domain_name = #{domainName},</if>
            <if test="sampleType != null">sample_type = #{sampleType},</if>
            <if test="fullType != null">full_type = #{fullType},</if>
            <if test="detailName != null">detail_name = #{detailName},</if>
            <if test="status != null">status = #{status},</if>
            <if test="freezeFlag != null">freeze_flag = #{freezeFlag},</if>
            <if test="isCal != null">is_cal = #{isCal},</if>
            <if test="dispStatus != null">disp_status = #{dispStatus},</if>
            <if test="freezeBy != null">freeze_by = #{freezeBy},</if>
            <if test="freezerDesc != null">freezer_desc = #{freezerDesc},</if>
            <if test="freezeTime != null">freeze_time = #{freezeTime},</if>
            <if test="recorderDesc != null">recorder_desc = #{recorderDesc},</if>
            <if test="createrDesc != null">creater_desc = #{createrDesc},</if>
            <if test="createrCode != null">creater_code = #{createrCode},</if>
            <if test="createrDate != null">creater_date = #{createrDate},</if>
            <if test="startTime != null">start_time = #{startTime},</if>
            <if test="sorter != null">sorter = #{sorter},</if>
            <if test="createBy != null">create_by = #{createBy},</if>
            <if test="createTime != null">create_time = #{createTime},</if>
            <if test="updateBy != null">update_by = #{updateBy},</if>
            <if test="updateTime != null">update_time = #{updateTime},</if>
            <if test="remark != null">remark = #{remark},</if>
            <if test="delFlag != null">del_flag = #{delFlag},</if>
        </trim>
        where sample_programs_id = #{sampleProgramsId}
    </update>

    <delete id="deleteSampleProgramsBySampleProgramsId" parameterType="Long">
        delete from lims_sample_programs where sample_programs_id = #{sampleProgramsId}
    </delete>

    <delete id="deleteSampleProgramsBySampleProgramsIds" parameterType="String">
        delete from lims_sample_programs where sample_programs_id in 
        <foreach item="sampleProgramsId" collection="array" open="(" separator="," close=")">
            #{sampleProgramsId}
        </foreach>
    </delete>
</mapper>